<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.axing.reggie.mapper.DishFlavorMapper">

    <insert id="save">
        insert into dish_flavor(
            id,
            dish_id,
            name,
            value,
            create_time,
            update_time,
            create_user,
            update_user
        )
        values
        <foreach collection="list" item="flavor" separator=",">
            (#{flavor.id},#{flavor.dishId},#{flavor.name},#{flavor.value},#{flavor.createTime},#{flavor.updateTime},#{flavor.createUser},#{flavor.updateUser})
        </foreach>
    </insert>

    <delete id="deleteFlavorById">
        delete from dish_flavor where dish_id=#{dishId}
    </delete>

    <delete id="deleteFlavorByIds">
        delete from dish_flavor where dish_id in
        <foreach collection="list" item="ids" separator="," open="(" close=")">
            #{ids}
        </foreach>
    </delete>

    <select id="getFlavorListByDishId" resultType="com.axing.reggie.domain.DishFlavor">
        select
            id,
            dish_id,
            name,
            value,
            update_time,
            update_user,
            is_deleted
        from dish_flavor
        where dish_id=#{dishId}
    </select>

</mapper>
